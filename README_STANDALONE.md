# Standalone PDF to Markdown ConverterUltra-optimized pure C implementation for converting PDF files to Markdown format with **zero Python dependencies**.## üöÄ Features- **Pure C Implementation**: No Python, no dependencies beyond standard C library and MuPDF- **Ultra-Fast Performance**: Optimized with `-O3`, `-march=native`, and aggressive compiler optimizations- **Memory Efficient**: Custom string builders and minimal memory allocation- **Font Analysis**: Automatic header detection based on font sizes- **Markdown Formatting**: Proper handling of bold, italic, monospace, strikethrough text- **Code Block Detection**: Automatic detection and formatting of code blocks- **Standalone Executable**: Single binary that can be distributed independently## üìã Requirements### Required- **GCC** or compatible C compiler with C99 support- **MuPDF development libraries** (`libmupdf-dev`)- **Standard math library** (`libm`)### Installation on Ubuntu/Debian```bashsudo apt-get updatesudo apt-get install build-essential libmupdf-dev```### Installation on CentOS/RHEL/Fedora```bashsudo yum install gcc mupdf-devel# or on newer versions:sudo dnf install gcc mupdf-devel```## üî® Building### Quick Build```bashmake```### Build Options```bashmake all        # Optimized build (default)make debug      # Debug build with symbolsmake no-mupdf   # Build without MuPDF (shows error message)make install    # Build and install system-wide```### Check Dependencies```bashmake deps```### Advanced Build with Custom Flags```bashCC=clang CFLAGS="-O3 -flto" make```## üéØ Usage### Basic Usage```bash./bin/to_md input.pdf                 # Output: input.md./bin/to_md input.pdf output.md       # Custom output file```### Examples```bash# Convert a PDF to Markdown./bin/to_md document.pdf# Convert with custom output name./bin/to_md research_paper.pdf paper.md# Process multiple filesfor pdf in *.pdf; do ./bin/to_md "$pdf"; done```## üß™ Testing### Run Tests```bashmake test           # Basic functionality testmake benchmark      # Performance benchmarkmake memcheck       # Memory leak detection (requires valgrind)```### Performance Testing```bash# Time the conversiontime ./bin/to_md large_document.pdf# Memory usage
/usr/bin/time -v ./bin/to_md document.pdf```## ‚ö° Performance### Optimizations Applied- **Compiler Optimizations**: `-O3 -march=native -mtune=native -ffast-math`- **Memory Management**: Custom string builders with pre-allocation- **Algorithm Efficiency**: Optimized font analysis and text processing- **Vector Operations**: `-ftree-vectorize` for SIMD when possible- **Math Optimizations**: Fast floating-point operations### Expected Performance- **Small PDFs** (1-10 pages): ~0.1-0.5 seconds- **Medium PDFs** (10-100 pages): ~0.5-3 seconds  - **Large PDFs** (100+ pages): ~3-15 seconds- **Memory Usage**: ~10-50MB depending on document complexity## üìÅ Output FormatThe converter generates clean Markdown with:### Text Formatting- **Bold text** from PDF bold formatting- *Italic text* from PDF italic formatting- `Monospace text` from PDF monospace fonts- ~~Strikethrough~~ from PDF strikethrough formatting### Document Structure- `# Headers` automatically detected from font sizes- Code blocks from monospace sections- Proper paragraph separation- Page markers (`--- Page N ---`)### Example Output```markdown# Document TitleThis is regular text with **bold** and *italic* formatting.## Section HeaderHere's a code block:```function example() {    return "hello world";}```- Bullet points are converted- Multiple levels supported```## üîß Technical Details### Architecture- **String Builder**: Dynamic buffer management for efficient text construction- **Font Analyzer**: Statistical analysis of font sizes for header detection- **Text Processor**: Span-level text formatting with markdown conversion- **Memory Management**: Careful allocation/deallocation with error handling### Key Components```c
// Core structurestypedef struct StringBuilder;     // Dynamic text buffertypedef struct FontAnalyzer;      // Font size analysistypedef struct TextSpan;          // Individual text spantypedef struct PageParams;        // Processing parameters```### Compilation Details```bash# Full compilation commandgcc -std=c99 -O3 -march=native -mtune=native -ffast-math \    -funroll-loops -finline-functions -ftree-vectorize \    -fno-signed-zeros -fno-trapping-math -fassociative-math \    -freciprocal-math -DHAVE_MUPDF \    -I/usr/include/mupdf -o to_md to_md_standalone.c \    -lmupdf -lm -pthread```## üõ† Development### Code Analysis```bashmake analyze        # Static analysis with cppcheck/clang-tidy```### Memory Debugging```bashmake memcheck       # Valgrind memory check```### Build Information```bashmake info           # Show build configurationmake help           # Show all available targets```## üö® Troubleshooting### Common Issues#### MuPDF Not Found```Error: mupdf/fitz.h: No such file or directory```
**Solution**: Install MuPDF development libraries```bashsudo apt-get install libmupdf-dev    # Ubuntu/Debiansudo yum install mupdf-devel          # CentOS/RHEL```#### Library Link Errors```undefined reference to `fz_new_context'```
**Solution**: Ensure MuPDF library is installed and linked```bashsudo ldconfig                         # Refresh library cachemake deps                            # Check dependencies```#### Permission Denied```./to_md: Permission denied```
**Solution**: Make executable```bashchmod +x bin/to_md```### Debug BuildFor troubleshooting, use the debug build:```bashmake clean debuggdb ./bin/to_md```## üìä Comparison with Python Version| Feature | Python+Cython | Standalone C ||---------|---------------|--------------|| **Dependencies** | Python, PyMuPDF, Cython | Only MuPDF + C stdlib || **Startup Time** | ~0.5-1s | ~0.01s || **Memory Usage** | ~50-200MB | ~10-50MB || **Distribution** | Requires Python env | Single binary || **Performance** | Very Fast | Ultra Fast || **Portability** | Platform specific | Compile anywhere |## üìù LicenseThis implementation is provided as-is for educational and practical use. Optimized for maximum performance with minimal dependencies.## ü§ù ContributingTo improve the standalone C implementation:1. **Performance**: Profile with `perf` or `gprof`2. **Memory**: Check with `valgrind` 3. **Compatibility**: Test on different systems4. **Features**: Add new PDF processing capabilities### Performance Profiling```bash# Profile with perfperf record ./bin/to_md large.pdfperf report# Profile with gprof  gcc -pg -O2 -o to_md_prof to_md_standalone.c -lmupdf -lm./to_md_prof test.pdfgprof to_md_prof gmon.out```---
**Ultra-optimized for maximum performance** üöÄ
**Zero Python dependencies** ‚ö°
**Production ready** ‚úÖ